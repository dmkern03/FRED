# Delta Live Tables Pipeline Configuration
resources:
  pipelines:
    fred_dlt_pipeline:
      name: "FRED Data Pipeline - DLT"
      catalog: ${var.catalog}
      target: ${var.schema}

      # Pipeline configuration
      configuration:
        catalog: ${var.catalog}
        schema: ${var.schema}

      # Notebook libraries that define the pipeline
      libraries:
        - notebook:
            path: ../notebooks/02_Bronze_Setup.py
        - notebook:
            path: ../notebooks/03_Silver_Setup.py
        - notebook:
            path: ../notebooks/04_Gold_Setup.py

      # Development settings
      development: true
      continuous: false

      # Use serverless compute (required by this workspace)
      serverless: true

      # Channel - use 'current' for latest features
      channel: "CURRENT"

      # Enable or disable table expectations
      expectations:
        fail_on_error: false

      # Photon acceleration
      photon: true

      # Storage location (optional - Unity Catalog will use managed location if not specified)
      # storage: "/mnt/dlt/fred"

      # Notifications (optional)
      # notifications:
      #   - alerts:
      #       - "on-update-failure"
      #     email_recipients:
      #       - "dmkern03@gmail.com"
      notification_settings:
        no_alert_for_skipped_runs: true
      email_notifications:
        on_failure:
          - ${var.email_rec}
